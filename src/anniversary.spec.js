import test from 'ava';
import anniversary from './anniversary';
import { HDate } from './hdate';

test('yahrzeit', t => {
    // Gregorian YYYY, MM, DD
    const items = [
      [2018, 12, 23, "General",
        "1/2/2018 12/23/2018 1/12/2020 12/30/2020 12/19/2021 1/8/2023 12/27/2023 1/15/2025 1/4/2026 12/25/2026 1/14/2028 1/2/2029 12/21/2029 1/10/2031 12/30/2031 12/17/2032 1/6/2034 12/27/2034 1/15/2036 1/2/2037 12/23/2037 1/11/2039 1/1/2040 12/19/2040 1/7/2042 12/28/2042"
      ],
      [2014,  3,  2, "Adar1-30",
        "2/15/2018 3/7/2019 2/25/2020 2/12/2021 3/3/2022 2/21/2023 3/10/2024 2/28/2025 2/17/2026 3/9/2027 2/27/2028 2/15/2029 3/5/2030 2/23/2031 2/12/2032 3/1/2033 2/19/2034 3/11/2035 2/28/2036 2/15/2037 3/7/2038 2/24/2039 2/14/2040 3/3/2041 2/20/2042",
      ],
      [2014,  3, 22, "Adar2",
        "3/7/2018 3/27/2019 3/16/2020 3/4/2021 3/23/2022 3/13/2023 3/30/2024 3/20/2025 3/9/2026 3/29/2027 3/18/2028 3/7/2029 3/25/2030 3/15/2031 3/3/2032 3/21/2033 3/11/2034 3/31/2035 3/19/2036 3/7/2037 3/27/2038 3/16/2039 3/5/2040 3/23/2041 3/12/2042",
      ],
      [2013, 12,  3, "Kislev-30-Ex1",
        "12/18/2017 12/8/2018 12/28/2019 12/16/2020 12/4/2021 12/24/2022 12/13/2023 12/31/2024 12/20/2025 12/10/2026 12/30/2027 12/18/2028 12/7/2029 12/26/2030 12/15/2031 12/3/2032 12/22/2033 12/12/2034 12/31/2035 12/19/2036 12/8/2037 12/27/2038 12/17/2039 12/5/2040 12/23/2041",
      ],
      [2011, 12, 26, "Kislev-30-Ex2",
        "12/18/2017 12/8/2018 12/28/2019 12/15/2020 12/4/2021 12/24/2022 12/12/2023 12/31/2024 12/20/2025 12/10/2026 12/30/2027 12/18/2028 12/6/2029 12/26/2030 12/15/2031 12/2/2032 12/22/2033 12/12/2034 12/31/2035 12/18/2036 12/8/2037 12/27/2038 12/17/2039 12/4/2040 12/23/2041",
      ],
      [2010, 11,  7, "Cheshvan-30-Ex1",
        "11/18/2017 11/8/2018 11/28/2019 11/16/2020 11/4/2021 11/24/2022 11/13/2023 12/1/2024 11/20/2025 11/10/2026 11/30/2027 11/18/2028 11/7/2029 11/26/2030 11/15/2031 11/3/2032 11/22/2033 11/12/2034 12/1/2035 11/19/2036 11/8/2037 11/27/2038 11/17/2039 11/5/2040 11/23/2041",
      ],
      [2009, 11, 17, "Cheshvan-30-Ex2",
        "11/19/2017 11/8/2018 11/28/2019 11/17/2020 11/5/2021 11/24/2022 11/14/2023 12/1/2024 11/21/2025 11/10/2026 11/30/2027 11/19/2028 11/8/2029 11/26/2030 11/16/2031 11/4/2032 11/22/2033 11/12/2034 12/2/2035 11/20/2036 11/8/2037 11/28/2038 11/17/2039 11/6/2040 11/24/2041",
      ],
    ];
    const today = new HDate(new Date(2018, 0, 1, 12, 34));
    for (const item of items) {
        const gd = new Date(item[0], item[1] - 1, item[2]);
        const name = item[3];
        const expected = item[4].split(" ");
        for (let i = 0; i < 25; i++) {
            const hyear = i + today.getFullYear();
            const yahrzeit = anniversary.getYahrzeit(hyear, gd);
            const greg = yahrzeit.greg();
            const dateStr = greg.toLocaleDateString("en-US");
            t.is(dateStr, expected[i], `${name} ${i} ${hyear}`);
        }
    }
});

test('birthday', t => {
    t.pass();
});
